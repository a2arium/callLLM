yarn run v1.22.22
warning ../../../package.json: No license field
$ /Users/maximantonov/Work/_lab/callllm/node_modules/.bin/ts-node examples/toolCalling.ts
[StreamHandler] Initialized StreamHandler { callerId: undefined }
[StreamController] Initialized StreamController
[ToolController] Initialized with maxIterations: 5
[ToolOrchestrator] Initialized
[ChunkController] Initialized with maxIterations: 20

5. Tool Call Stream Demonstration
---------------------------------------------------------------
Starting the stream - you'll see content as it arrives in real-time
With improved streaming implementation that:
- Properly accumulates tool arguments using argumentChunk
- Uses true streaming directly from the LLM
- Doesn't rely on non-streaming requests

[StreamHandler] Initialized StreamHandler { callerId: '49d498e4-5683-4b11-b9e8-462188637882' }
[StreamController] Initialized StreamController
[ToolOrchestrator] Initialized
Starting stream processing loop
[StreamBuffer] StreamBuffer initialized
[StreamBuffer] Starting streamDirectResponse {
  model: 'gpt-4o',
  hasTools: true,
  hasInitialMessages: true,
  systemMessage: 'You are a helpful assistant....',
  maxHistoryLength: 100
}
[StreamBuffer] Creating stream {
  model: 'gpt-4o',
  inputTokens: 25,
  maxRetries: 3,
  stream: true,
  tools: [ 'get_time' ],
  toolChoice: 'auto',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882',
  responseFormat: undefined,
  hasJsonSchema: false,
  messagesCount: 3,
  isDirectStreaming: true
}
[StreamBuffer] Starting stream attempt {
  attempt: 1,
  maxRetries: 3,
  model: 'gpt-4o',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882'
}
[StreamBuffer] Acquiring stream with retry manager {
  maxRetries: 3,
  model: 'gpt-4o',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882'
}
[StreamBuffer] Requesting provider stream {
  provider: 'OpenAIAdapter',
  model: 'gpt-4o',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882',
  toolsCount: 1
}
[StreamBuffer] Provider stream created { timeToCreateMs: 721, model: 'gpt-4o' }
[StreamBuffer] Processing provider stream through StreamHandler { model: 'gpt-4o', callerId: '49d498e4-5683-4b11-b9e8-462188637882' }
[StreamBuffer] Starting stream processing {
  inputTokens: 25,
  jsonMode: false,
  hasSchema: false,
  callerId: '49d498e4-5683-4b11-b9e8-462188637882',
  isStreamModeEnabled: true,
  toolsEnabled: true,
  modelName: 'gpt-4o'
}
[StreamBuffer] Stream iterator starting { effectiveCallerId: '49d498e4-5683-4b11-b9e8-462188637882' }
[StreamBuffer] Provider chunk {
  chunkIndex: 1,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 1,
  chunkIndex: 1,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 1,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 1,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 0
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 1,
  toolCalls: '[{"name":"get_time","argumentChunk":""}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  hasArgumentChunk: false,
  argumentChunkValue: '',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 0,
  argsString: '',
  chunkIndex: 1,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  initialArgLength: 0,
  args: '',
  chunkIndex: 1
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 0,
  chunkIndex: 1,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 1,
  completedToolCalls: 0,
  buffersChecked: 1,
  activeBuffers: 1,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":""}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 2,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 2,
  chunkIndex: 2,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 2,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 2,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 1
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 2,
  toolCalls: '[{"name":"get_time","argumentChunk":"{\\""}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: '{"',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 2,
  argsString: '{"',
  chunkIndex: 2,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  initialArgLength: 2,
  args: '{"',
  chunkIndex: 2
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 0,
  chunkIndex: 2,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 1,
  chunkIndex: 2,
  firstChar: '{',
  lastChar: '"',
  args: '{"'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 2,
  completedToolCalls: 0,
  buffersChecked: 2,
  activeBuffers: 2,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 1
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"{\\""}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 3,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 3,
  chunkIndex: 3,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 3,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 3,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 2
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 3,
  toolCalls: '[{"name":"get_time","argumentChunk":"location"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: 'location',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 8,
  argsString: 'location',
  chunkIndex: 3,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  initialArgLength: 8,
  args: 'location',
  chunkIndex: 3
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 11,
  chunkIndex: 3,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 11,
  chunkIndex: 3,
  firstChar: '{',
  lastChar: '"',
  args: '{"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  argLength: 8,
  bufferAgeMs: 0,
  chunkIndex: 3,
  firstChar: 'l',
  lastChar: 'n',
  args: 'location'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 3,
  completedToolCalls: 0,
  buffersChecked: 3,
  activeBuffers: 3,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"location"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 4,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 4,
  chunkIndex: 4,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 4,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 4,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 3
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 4,
  toolCalls: '[{"name":"get_time","argumentChunk":"\\":\\""}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676937201-wsrb3mm',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: '":"',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 3,
  argsString: '":"',
  chunkIndex: 4,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676937201-wsrb3mm',
  toolName: 'get_time',
  initialArgLength: 3,
  args: '":"',
  chunkIndex: 4
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 11,
  chunkIndex: 4,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 11,
  chunkIndex: 4,
  firstChar: '{',
  lastChar: '"',
  args: '{"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  argLength: 8,
  bufferAgeMs: 0,
  chunkIndex: 4,
  firstChar: 'l',
  lastChar: 'n',
  args: 'location'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-wsrb3mm',
  toolName: 'get_time',
  argLength: 3,
  bufferAgeMs: 0,
  chunkIndex: 4,
  firstChar: '"',
  lastChar: '"',
  args: '":"'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 4,
  completedToolCalls: 0,
  buffersChecked: 4,
  activeBuffers: 4,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"\\":\\""}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 5,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 5,
  chunkIndex: 5,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 5,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 5,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 4
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 5,
  toolCalls: '[{"name":"get_time","argumentChunk":"Tokyo"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676937236-77ypuip',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: 'Tokyo',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 5,
  argsString: 'Tokyo',
  chunkIndex: 5,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676937236-77ypuip',
  toolName: 'get_time',
  initialArgLength: 5,
  args: 'Tokyo',
  chunkIndex: 5
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 46,
  chunkIndex: 5,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 46,
  chunkIndex: 5,
  firstChar: '{',
  lastChar: '"',
  args: '{"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  argLength: 8,
  bufferAgeMs: 35,
  chunkIndex: 5,
  firstChar: 'l',
  lastChar: 'n',
  args: 'location'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-wsrb3mm',
  toolName: 'get_time',
  argLength: 3,
  bufferAgeMs: 35,
  chunkIndex: 5,
  firstChar: '"',
  lastChar: '"',
  args: '":"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-77ypuip',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 0,
  chunkIndex: 5,
  firstChar: 'T',
  lastChar: 'o',
  args: 'Tokyo'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 5,
  completedToolCalls: 0,
  buffersChecked: 5,
  activeBuffers: 5,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"Tokyo"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 6,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 6,
  chunkIndex: 6,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 6,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 6,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 5
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 6,
  toolCalls: '[{"name":"get_time","argumentChunk":","}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676937236-2m2guy5',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: ',',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 1,
  argsString: ',',
  chunkIndex: 6,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676937236-2m2guy5',
  toolName: 'get_time',
  initialArgLength: 1,
  args: ',',
  chunkIndex: 6
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 46,
  chunkIndex: 6,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 46,
  chunkIndex: 6,
  firstChar: '{',
  lastChar: '"',
  args: '{"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  argLength: 8,
  bufferAgeMs: 35,
  chunkIndex: 6,
  firstChar: 'l',
  lastChar: 'n',
  args: 'location'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-wsrb3mm',
  toolName: 'get_time',
  argLength: 3,
  bufferAgeMs: 35,
  chunkIndex: 6,
  firstChar: '"',
  lastChar: '"',
  args: '":"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-77ypuip',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 0,
  chunkIndex: 6,
  firstChar: 'T',
  lastChar: 'o',
  args: 'Tokyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-2m2guy5',
  toolName: 'get_time',
  argLength: 1,
  bufferAgeMs: 0,
  chunkIndex: 6,
  firstChar: ',',
  lastChar: ',',
  args: ','
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 6,
  completedToolCalls: 0,
  buffersChecked: 6,
  activeBuffers: 6,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":","}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 7,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 7,
  chunkIndex: 7,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 7,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 7,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 6
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 7,
  toolCalls: '[{"name":"get_time","argumentChunk":" Japan"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676937236-mdj07mx',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: ' Japan',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 6,
  argsString: ' Japan',
  chunkIndex: 7,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676937236-mdj07mx',
  toolName: 'get_time',
  initialArgLength: 6,
  args: ' Japan',
  chunkIndex: 7
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 47,
  chunkIndex: 7,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 47,
  chunkIndex: 7,
  firstChar: '{',
  lastChar: '"',
  args: '{"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  argLength: 8,
  bufferAgeMs: 36,
  chunkIndex: 7,
  firstChar: 'l',
  lastChar: 'n',
  args: 'location'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-wsrb3mm',
  toolName: 'get_time',
  argLength: 3,
  bufferAgeMs: 36,
  chunkIndex: 7,
  firstChar: '"',
  lastChar: '"',
  args: '":"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-77ypuip',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 1,
  chunkIndex: 7,
  firstChar: 'T',
  lastChar: 'o',
  args: 'Tokyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-2m2guy5',
  toolName: 'get_time',
  argLength: 1,
  bufferAgeMs: 1,
  chunkIndex: 7,
  firstChar: ',',
  lastChar: ',',
  args: ','
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-mdj07mx',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 0,
  chunkIndex: 7,
  firstChar: 'J',
  lastChar: 'n',
  args: 'Japan'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 7,
  completedToolCalls: 0,
  buffersChecked: 7,
  activeBuffers: 7,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 1
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":" Japan"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 8,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 8,
  chunkIndex: 8,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 8,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 8,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 7
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 8,
  toolCalls: '[{"name":"get_time","argumentChunk":"\\"}"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676937237-aj3b32d',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: '"}',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 2,
  argsString: '"}',
  chunkIndex: 8,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676937237-aj3b32d',
  toolName: 'get_time',
  initialArgLength: 2,
  args: '"}',
  chunkIndex: 8
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 47,
  chunkIndex: 8,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 47,
  chunkIndex: 8,
  firstChar: '{',
  lastChar: '"',
  args: '{"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  argLength: 8,
  bufferAgeMs: 36,
  chunkIndex: 8,
  firstChar: 'l',
  lastChar: 'n',
  args: 'location'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-wsrb3mm',
  toolName: 'get_time',
  argLength: 3,
  bufferAgeMs: 36,
  chunkIndex: 8,
  firstChar: '"',
  lastChar: '"',
  args: '":"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-77ypuip',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 1,
  chunkIndex: 8,
  firstChar: 'T',
  lastChar: 'o',
  args: 'Tokyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-2m2guy5',
  toolName: 'get_time',
  argLength: 1,
  bufferAgeMs: 1,
  chunkIndex: 8,
  firstChar: ',',
  lastChar: ',',
  args: ','
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-mdj07mx',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 0,
  chunkIndex: 8,
  firstChar: 'J',
  lastChar: 'n',
  args: 'Japan'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937237-aj3b32d',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 0,
  chunkIndex: 8,
  firstChar: '"',
  lastChar: '}',
  args: '"}'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 8,
  completedToolCalls: 0,
  buffersChecked: 8,
  activeBuffers: 8,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"\\"}"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 9,
  contentLength: 0,
  isComplete: true,
  hasToolCalls: false,
  toolCallCount: 0
}
[StreamBuffer] Processing chunk {
  chunkIndex: 9,
  isComplete: true,
  incrementalTokens: 0,
  currentOutputTokens: 0,
  isFirstChunk: true,
  contentLength: 0,
  callerId: '49d498e4-5683-4b11-b9e8-462188637882',
  hasStartedContent: false,
  chunkHasToolCalls: false,
  responseFormat: undefined,
  finishReason: 'tool_calls'
}
[StreamBuffer] Stream completed {
  totalChunks: 9,
  totalOutputTokens: 0,
  totalContentLength: 0,
  totalToolCalls: 8,
  totalCost: 0.0000625,
  totalTimeMs: 171,
  finishReason: 'tool_calls'
}
[StreamBuffer] Stream completed successfully {
  attempt: 1,
  totalChunks: 9,
  contentLength: 0,
  timeMs: 171,
  finishReason: 'tool_calls',
  model: 'gpt-4o',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 9,
  contentLength: 0,
  isComplete: true,
  hasToolCalls: false,
  toolCallCount: 0,
  activeToolBuffers: 8
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-2hz153o',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 120,
  chunkIndex: 9,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937190-ovosc7h',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 120,
  chunkIndex: 9,
  firstChar: '{',
  lastChar: '"',
  args: '{"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-lsim749',
  toolName: 'get_time',
  argLength: 8,
  bufferAgeMs: 109,
  chunkIndex: 9,
  firstChar: 'l',
  lastChar: 'n',
  args: 'location'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937201-wsrb3mm',
  toolName: 'get_time',
  argLength: 3,
  bufferAgeMs: 109,
  chunkIndex: 9,
  firstChar: '"',
  lastChar: '"',
  args: '":"'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-77ypuip',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 74,
  chunkIndex: 9,
  firstChar: 'T',
  lastChar: 'o',
  args: 'Tokyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-2m2guy5',
  toolName: 'get_time',
  argLength: 1,
  bufferAgeMs: 74,
  chunkIndex: 9,
  firstChar: ',',
  lastChar: ',',
  args: ','
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937236-mdj07mx',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 73,
  chunkIndex: 9,
  firstChar: 'J',
  lastChar: 'n',
  args: 'Japan'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676937237-aj3b32d',
  toolName: 'get_time',
  argLength: 2,
  bufferAgeMs: 73,
  chunkIndex: 9,
  firstChar: '"',
  lastChar: '}',
  args: '"}'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 9,
  completedToolCalls: 0,
  buffersChecked: 8,
  activeBuffers: 8,
  contentLength: 0,
  isComplete: true,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: false,
  toolCallsInChunk: 0,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: true
}
[StreamBuffer] Stream completed, exiting processing loop { iteration: 0, contentLength: 0 }
Finished stream processing loop

6. Multi-Tool Call Stream Demonstration
---------------------------------------------------------------
This demonstrates handling multiple tool calls with proper argument accumulation
[StreamHandler] Initialized StreamHandler { callerId: '49d498e4-5683-4b11-b9e8-462188637882' }
[StreamController] Initialized StreamController
[ToolOrchestrator] Initialized
[StreamBuffer] StreamBuffer initialized
[StreamBuffer] Starting streamDirectResponse {
  model: 'gpt-4o',
  hasTools: true,
  hasInitialMessages: true,
  systemMessage: 'You are a helpful assistant....',
  maxHistoryLength: 100
}
[StreamBuffer] Creating stream {
  model: 'gpt-4o',
  inputTokens: 22,
  maxRetries: 3,
  stream: true,
  tools: [ 'get_time', 'get_weather' ],
  toolChoice: 'auto',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882',
  responseFormat: undefined,
  hasJsonSchema: false,
  messagesCount: 3,
  isDirectStreaming: true
}
[StreamBuffer] Starting stream attempt {
  attempt: 1,
  maxRetries: 3,
  model: 'gpt-4o',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882'
}
[StreamBuffer] Acquiring stream with retry manager {
  maxRetries: 3,
  model: 'gpt-4o',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882'
}
[StreamBuffer] Requesting provider stream {
  provider: 'OpenAIAdapter',
  model: 'gpt-4o',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882',
  toolsCount: 2
}
[StreamBuffer] Provider stream created { timeToCreateMs: 1073, model: 'gpt-4o' }
[StreamBuffer] Processing provider stream through StreamHandler { model: 'gpt-4o', callerId: '49d498e4-5683-4b11-b9e8-462188637882' }
[StreamBuffer] Starting stream processing {
  inputTokens: 22,
  jsonMode: false,
  hasSchema: false,
  callerId: '49d498e4-5683-4b11-b9e8-462188637882',
  isStreamModeEnabled: true,
  toolsEnabled: true,
  modelName: 'gpt-4o'
}
[StreamBuffer] Stream iterator starting { effectiveCallerId: '49d498e4-5683-4b11-b9e8-462188637882' }
[StreamBuffer] Skipping empty provider chunk { chunkIndex: 1 }
[StreamBuffer] Provider chunk {
  chunkIndex: 2,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 1,
  chunkIndex: 1,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 1,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 1,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 0
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 1,
  toolCalls: '[{"name":"get_time","argumentChunk":""}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  hasArgumentChunk: false,
  argumentChunkValue: '',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 0,
  argsString: '',
  chunkIndex: 1,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  initialArgLength: 0,
  args: '',
  chunkIndex: 1
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 0,
  chunkIndex: 1,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 1,
  completedToolCalls: 0,
  buffersChecked: 1,
  activeBuffers: 1,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":""}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 3,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 2,
  chunkIndex: 2,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 2,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 2,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 1
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 2,
  toolCalls: '[{"name":"get_time","argumentChunk":"{\\"lo"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: '{"lo',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 4,
  argsString: '{"lo',
  chunkIndex: 2,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  initialArgLength: 4,
  args: '{"lo',
  chunkIndex: 2
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 11,
  chunkIndex: 2,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 2,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 2,
  completedToolCalls: 0,
  buffersChecked: 2,
  activeBuffers: 2,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 1
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"{\\"lo"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 4,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 3,
  chunkIndex: 3,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 3,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 3,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 2
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 3,
  toolCalls: '[{"name":"get_time","argumentChunk":"catio"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: 'catio',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 5,
  argsString: 'catio',
  chunkIndex: 3,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  initialArgLength: 5,
  args: 'catio',
  chunkIndex: 3
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 11,
  chunkIndex: 3,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 3,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 0,
  chunkIndex: 3,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 3,
  completedToolCalls: 0,
  buffersChecked: 3,
  activeBuffers: 3,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"catio"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 5,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 4,
  chunkIndex: 4,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 4,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 4,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 3
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 4,
  toolCalls: '[{"name":"get_time","argumentChunk":"n\\": \\"T"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: 'n": "T',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 6,
  argsString: 'n": "T',
  chunkIndex: 4,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  initialArgLength: 6,
  args: 'n": "T',
  chunkIndex: 4
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 15,
  chunkIndex: 4,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 4,
  chunkIndex: 4,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 4,
  chunkIndex: 4,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 0,
  chunkIndex: 4,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 4,
  completedToolCalls: 0,
  buffersChecked: 4,
  activeBuffers: 4,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"n\\": \\"T"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 6,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 5,
  chunkIndex: 5,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 5,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 5,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 4
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 5,
  toolCalls: '[{"name":"get_time","argumentChunk":"okyo"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: 'okyo',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 4,
  argsString: 'okyo',
  chunkIndex: 5,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  initialArgLength: 4,
  args: 'okyo',
  chunkIndex: 5
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 16,
  chunkIndex: 5,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 5,
  chunkIndex: 5,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 5,
  chunkIndex: 5,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 1,
  chunkIndex: 5,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 5,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 5,
  completedToolCalls: 0,
  buffersChecked: 5,
  activeBuffers: 5,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 1
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"okyo"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 7,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 6,
  chunkIndex: 6,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 6,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 6,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 5
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 6,
  toolCalls: '[{"name":"get_time","argumentChunk":", Jap"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: ', Jap',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 5,
  argsString: ', Jap',
  chunkIndex: 6,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  initialArgLength: 5,
  args: ', Jap',
  chunkIndex: 6
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 18,
  chunkIndex: 6,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 7,
  chunkIndex: 6,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 7,
  chunkIndex: 6,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 3,
  chunkIndex: 6,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 2,
  chunkIndex: 6,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 1,
  chunkIndex: 6,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 6,
  completedToolCalls: 0,
  buffersChecked: 6,
  activeBuffers: 6,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 1
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":", Jap"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 8,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 7,
  chunkIndex: 7,
  toolNames: [ 'get_time' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 7,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 7,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 6
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 7,
  toolCalls: '[{"name":"get_time","argumentChunk":"an\\"}"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  hasArgumentChunk: true,
  argumentChunkValue: 'an"}',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 4,
  argsString: 'an"}',
  chunkIndex: 7,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  initialArgLength: 4,
  args: 'an"}',
  chunkIndex: 7
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 18,
  chunkIndex: 7,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 7,
  chunkIndex: 7,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 7,
  chunkIndex: 7,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 3,
  chunkIndex: 7,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 2,
  chunkIndex: 7,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 1,
  chunkIndex: 7,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 7,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 7,
  completedToolCalls: 0,
  buffersChecked: 7,
  activeBuffers: 7,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_time","argumentChunk":"an\\"}"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 9,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 8,
  chunkIndex: 8,
  toolNames: [ 'get_weather' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 8,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 8,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 7
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 8,
  toolCalls: '[{"name":"get_weather","argumentChunk":""}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  hasArgumentChunk: false,
  argumentChunkValue: '',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 0,
  argsString: '',
  chunkIndex: 8,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  initialArgLength: 0,
  args: '',
  chunkIndex: 8
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 18,
  chunkIndex: 8,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 7,
  chunkIndex: 8,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 7,
  chunkIndex: 8,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 3,
  chunkIndex: 8,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 2,
  chunkIndex: 8,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 1,
  chunkIndex: 8,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 8,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  argLength: 0,
  bufferAgeMs: 0,
  chunkIndex: 8,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 8,
  completedToolCalls: 0,
  buffersChecked: 8,
  activeBuffers: 8,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_weather","argumentChunk":""}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 10,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 9,
  chunkIndex: 9,
  toolNames: [ 'get_weather' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 9,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 9,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 8
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 9,
  toolCalls: '[{"name":"get_weather","argumentChunk":"{\\"lo"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  hasArgumentChunk: true,
  argumentChunkValue: '{"lo',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 4,
  argsString: '{"lo',
  chunkIndex: 9,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  initialArgLength: 4,
  args: '{"lo',
  chunkIndex: 9
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 19,
  chunkIndex: 9,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 8,
  chunkIndex: 9,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 8,
  chunkIndex: 9,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 4,
  chunkIndex: 9,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 3,
  chunkIndex: 9,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 2,
  chunkIndex: 9,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 1,
  chunkIndex: 9,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  argLength: 0,
  bufferAgeMs: 1,
  chunkIndex: 9,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 9,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 9,
  completedToolCalls: 0,
  buffersChecked: 9,
  activeBuffers: 9,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_weather","argumentChunk":"{\\"lo"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 11,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 10,
  chunkIndex: 10,
  toolNames: [ 'get_weather' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 10,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 10,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 9
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 10,
  toolCalls: '[{"name":"get_weather","argumentChunk":"catio"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938458-9xqdjai',
  toolName: 'get_weather',
  hasArgumentChunk: true,
  argumentChunkValue: 'catio',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 5,
  argsString: 'catio',
  chunkIndex: 10,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938458-9xqdjai',
  toolName: 'get_weather',
  initialArgLength: 5,
  args: 'catio',
  chunkIndex: 10
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 19,
  chunkIndex: 10,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 8,
  chunkIndex: 10,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 8,
  chunkIndex: 10,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 4,
  chunkIndex: 10,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 3,
  chunkIndex: 10,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 2,
  chunkIndex: 10,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 1,
  chunkIndex: 10,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  argLength: 0,
  bufferAgeMs: 1,
  chunkIndex: 10,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 10,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-9xqdjai',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 0,
  chunkIndex: 10,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 10,
  completedToolCalls: 0,
  buffersChecked: 10,
  activeBuffers: 10,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_weather","argumentChunk":"catio"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 12,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 11,
  chunkIndex: 11,
  toolNames: [ 'get_weather' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 11,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 11,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 10
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 11,
  toolCalls: '[{"name":"get_weather","argumentChunk":"n\\": \\"T"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938459-bahho9s',
  toolName: 'get_weather',
  hasArgumentChunk: true,
  argumentChunkValue: 'n": "T',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 6,
  argsString: 'n": "T',
  chunkIndex: 11,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938459-bahho9s',
  toolName: 'get_weather',
  initialArgLength: 6,
  args: 'n": "T',
  chunkIndex: 11
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 20,
  chunkIndex: 11,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 9,
  chunkIndex: 11,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 9,
  chunkIndex: 11,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 5,
  chunkIndex: 11,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 4,
  chunkIndex: 11,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 3,
  chunkIndex: 11,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 2,
  chunkIndex: 11,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  argLength: 0,
  bufferAgeMs: 2,
  chunkIndex: 11,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 1,
  chunkIndex: 11,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-9xqdjai',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 1,
  chunkIndex: 11,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938459-bahho9s',
  toolName: 'get_weather',
  argLength: 6,
  bufferAgeMs: 0,
  chunkIndex: 11,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 11,
  completedToolCalls: 0,
  buffersChecked: 11,
  activeBuffers: 11,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 1
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_weather","argumentChunk":"n\\": \\"T"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 13,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 12,
  chunkIndex: 12,
  toolNames: [ 'get_weather' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 12,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 12,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 11
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 12,
  toolCalls: '[{"name":"get_weather","argumentChunk":"okyo"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938460-0wd5x7v',
  toolName: 'get_weather',
  hasArgumentChunk: true,
  argumentChunkValue: 'okyo',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 4,
  argsString: 'okyo',
  chunkIndex: 12,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938460-0wd5x7v',
  toolName: 'get_weather',
  initialArgLength: 4,
  args: 'okyo',
  chunkIndex: 12
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 21,
  chunkIndex: 12,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 10,
  chunkIndex: 12,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 10,
  chunkIndex: 12,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 6,
  chunkIndex: 12,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 5,
  chunkIndex: 12,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 4,
  chunkIndex: 12,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 3,
  chunkIndex: 12,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  argLength: 0,
  bufferAgeMs: 3,
  chunkIndex: 12,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 2,
  chunkIndex: 12,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-9xqdjai',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 2,
  chunkIndex: 12,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938459-bahho9s',
  toolName: 'get_weather',
  argLength: 6,
  bufferAgeMs: 1,
  chunkIndex: 12,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938460-0wd5x7v',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 12,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 12,
  completedToolCalls: 0,
  buffersChecked: 12,
  activeBuffers: 12,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_weather","argumentChunk":"okyo"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 14,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 13,
  chunkIndex: 13,
  toolNames: [ 'get_weather' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 13,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 13,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 12
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 13,
  toolCalls: '[{"name":"get_weather","argumentChunk":", Jap"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938461-gc7athx',
  toolName: 'get_weather',
  hasArgumentChunk: true,
  argumentChunkValue: ', Jap',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 5,
  argsString: ', Jap',
  chunkIndex: 13,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938461-gc7athx',
  toolName: 'get_weather',
  initialArgLength: 5,
  args: ', Jap',
  chunkIndex: 13
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 22,
  chunkIndex: 13,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 11,
  chunkIndex: 13,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 11,
  chunkIndex: 13,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 7,
  chunkIndex: 13,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 6,
  chunkIndex: 13,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 5,
  chunkIndex: 13,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 4,
  chunkIndex: 13,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  argLength: 0,
  bufferAgeMs: 4,
  chunkIndex: 13,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 3,
  chunkIndex: 13,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-9xqdjai',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 3,
  chunkIndex: 13,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938459-bahho9s',
  toolName: 'get_weather',
  argLength: 6,
  bufferAgeMs: 2,
  chunkIndex: 13,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938460-0wd5x7v',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 1,
  chunkIndex: 13,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938461-gc7athx',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 0,
  chunkIndex: 13,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 13,
  completedToolCalls: 0,
  buffersChecked: 13,
  activeBuffers: 13,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_weather","argumentChunk":", Jap"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 15,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1
}
[StreamBuffer] Received tool calls in stream {
  count: 1,
  totalReceived: 14,
  chunkIndex: 14,
  toolNames: [ 'get_weather' ],
  isComplete: false
}
[StreamBuffer] Received empty chunk {
  chunkIndex: 14,
  hasToolCalls: true,
  isComplete: false,
  metadata: '{"finishReason":"null"}'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 14,
  contentLength: 0,
  isComplete: false,
  hasToolCalls: true,
  toolCallCount: 1,
  activeToolBuffers: 13
}
[StreamBuffer] Processing tool calls from chunk {
  count: 1,
  chunkIndex: 14,
  toolCalls: '[{"name":"get_weather","argumentChunk":"an\\"}"}]'
}
[StreamBuffer] Processing tool call {
  toolId: 'tool-1742676938467-akwn86e',
  toolName: 'get_weather',
  hasArgumentChunk: true,
  argumentChunkValue: 'an"}',
  hasArguments: false,
  argumentsValue: 'undefined',
  argumentLength: 4,
  argsString: 'an"}',
  chunkIndex: 14,
  bufferExists: false
}
[StreamBuffer] Creating new tool call buffer {
  toolId: 'tool-1742676938467-akwn86e',
  toolName: 'get_weather',
  initialArgLength: 4,
  args: 'an"}',
  chunkIndex: 14
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 28,
  chunkIndex: 14,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 17,
  chunkIndex: 14,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 17,
  chunkIndex: 14,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 13,
  chunkIndex: 14,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 12,
  chunkIndex: 14,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 11,
  chunkIndex: 14,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 10,
  chunkIndex: 14,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  argLength: 0,
  bufferAgeMs: 10,
  chunkIndex: 14,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 9,
  chunkIndex: 14,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-9xqdjai',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 9,
  chunkIndex: 14,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938459-bahho9s',
  toolName: 'get_weather',
  argLength: 6,
  bufferAgeMs: 8,
  chunkIndex: 14,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938460-0wd5x7v',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 7,
  chunkIndex: 14,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938461-gc7athx',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 6,
  chunkIndex: 14,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938467-akwn86e',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 0,
  chunkIndex: 14,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 14,
  completedToolCalls: 0,
  buffersChecked: 14,
  activeBuffers: 14,
  contentLength: 0,
  isComplete: false,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: true,
  toolCallsInChunk: 1,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: false
}
[StreamBuffer] Tool calls in chunk {
  toolCallsData: '[{"name":"get_weather","argumentChunk":"an\\"}"}]',
  iteration: 0
}
[StreamBuffer] Provider chunk {
  chunkIndex: 16,
  contentLength: 0,
  isComplete: true,
  hasToolCalls: false,
  toolCallCount: 0
}
[StreamBuffer] Processing chunk {
  chunkIndex: 15,
  isComplete: true,
  incrementalTokens: 0,
  currentOutputTokens: 0,
  isFirstChunk: true,
  contentLength: 0,
  callerId: '49d498e4-5683-4b11-b9e8-462188637882',
  hasStartedContent: false,
  chunkHasToolCalls: false,
  responseFormat: undefined,
  finishReason: 'tool_calls'
}
[StreamBuffer] Stream completed {
  totalChunks: 15,
  totalOutputTokens: 0,
  totalContentLength: 0,
  totalToolCalls: 14,
  totalCost: 0.000055,
  totalTimeMs: 82,
  finishReason: 'tool_calls'
}
[StreamBuffer] Stream completed successfully {
  attempt: 1,
  totalChunks: 15,
  contentLength: 0,
  timeMs: 82,
  finishReason: 'tool_calls',
  model: 'gpt-4o',
  callerId: '49d498e4-5683-4b11-b9e8-462188637882'
}
[StreamBuffer] Processing chunk {
  chunkIndex: 15,
  contentLength: 0,
  isComplete: true,
  hasToolCalls: false,
  toolCallCount: 0,
  activeToolBuffers: 14
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938439-q3xalkx',
  toolName: 'get_time',
  argLength: 0,
  bufferAgeMs: 77,
  chunkIndex: 15,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938449-woqvi6l',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 66,
  chunkIndex: 15,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938450-uvp7pmt',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 66,
  chunkIndex: 15,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938454-23nlu3a',
  toolName: 'get_time',
  argLength: 6,
  bufferAgeMs: 62,
  chunkIndex: 15,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938455-uxjdauu',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 61,
  chunkIndex: 15,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938456-vvtpnhl',
  toolName: 'get_time',
  argLength: 5,
  bufferAgeMs: 60,
  chunkIndex: 15,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-ob6j705',
  toolName: 'get_time',
  argLength: 4,
  bufferAgeMs: 59,
  chunkIndex: 15,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938457-xwesgie',
  toolName: 'get_weather',
  argLength: 0,
  bufferAgeMs: 59,
  chunkIndex: 15,
  firstChar: '',
  lastChar: '',
  args: ''
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-ktic4xg',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 58,
  chunkIndex: 15,
  firstChar: '{',
  lastChar: 'o',
  args: '{"lo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938458-9xqdjai',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 58,
  chunkIndex: 15,
  firstChar: 'c',
  lastChar: 'o',
  args: 'catio'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938459-bahho9s',
  toolName: 'get_weather',
  argLength: 6,
  bufferAgeMs: 57,
  chunkIndex: 15,
  firstChar: 'n',
  lastChar: 'T',
  args: 'n": "T'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938460-0wd5x7v',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 56,
  chunkIndex: 15,
  firstChar: 'o',
  lastChar: 'o',
  args: 'okyo'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938461-gc7athx',
  toolName: 'get_weather',
  argLength: 5,
  bufferAgeMs: 55,
  chunkIndex: 15,
  firstChar: ',',
  lastChar: 'p',
  args: ', Jap'
}
[StreamBuffer] Checking tool call buffer completeness {
  toolId: 'tool-1742676938467-akwn86e',
  toolName: 'get_weather',
  argLength: 4,
  bufferAgeMs: 49,
  chunkIndex: 15,
  firstChar: 'a',
  lastChar: '}',
  args: 'an"}'
}
[StreamBuffer] Chunk processing complete {
  chunkIndex: 15,
  completedToolCalls: 0,
  buffersChecked: 14,
  activeBuffers: 14,
  contentLength: 0,
  isComplete: true,
  processingTimeMs: 0
}
[StreamBuffer] Processed chunk in streamDirectResponse {
  iteration: 0,
  chunkHasToolCalls: false,
  toolCallsInChunk: 0,
  completedToolCalls: 0,
  contentLength: 0,
  isComplete: true
}
[StreamBuffer] Stream completed, exiting processing loop { iteration: 0, contentLength: 0 }
Done in 3.93s.
